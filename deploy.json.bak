{
    "defaultStacks":[ "discussion" ],
    "packages": {
        "cfn": {
            "type": "cloud-formation",
            "apps": [ "avatar" ],
            "data": {
                "cloudFormationStackName": "avatar",
                "prependStackToCloudFormationStackName": true,
                "appendStageToCloudFormationStackName": true,
                "templatePath": "cfn.json",
                "templateParameters": {
                    "App": "avatar",
                    "RpmName": "@@RPM_NAME",
                    "RpmRepoBucket": "com-gu-discussion-repo",
                    "VpcId": "vpc-5955933c",
                    "PublicVpcSubnets": "subnet-2719b342,subnet-e08d5e97,subnet-2024d379",
                    "PrivateVpcSubnets": "subnet-2419b341,subnet-e18d5e96,subnet-2324d37a",
                    "HostedZone": "discussion-aws.guardianapis.com"
                }
            }
        },
        "rpm": {
            "type": "autoscaling",
            "apps": [ "avatar" ],
            "data": {
                "bucket": "com-gu-discussion-repo",
                "prefixStage": false,
                "prefixPackage": false,
                "prefixStack": false
            }
        }
    },
    "recipes": {
        "default": {
            "depends": [ "rpmUpload", "updateStack",  "deploy" ]
        },
        "rpmUpload": {
            "actions": [ "rpm.uploadArtifacts" ]
        },
        "updateStack": {
            "actions": [ "cfn.updateStack" ]
        },
        "deploy": {
            "actions": [ "rpm.deploy" ]
        }
    }
}
